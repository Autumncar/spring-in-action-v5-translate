# 16.2.2 查看配置详细信息

除了接收有关应用程序的一般信息之外，了解应用程序的配置方式也很有启发性。 应用程序上下文中有哪些 bean？ 哪些自动配置条件通过或失败？ 应用程序可以使用哪些环境属性？ HTTP 请求如何映射到控制器？ 一个或多个包或类设置为什么日志记录级别？

这些问题由 Actuator 的 `/beans`、`/conditions`、`/env`、`/configprops`、`/mappings` 和 `/loggers` 端点回答。 在某些情况下，例如 `/env` 和 `/loggers`，您甚至可以动态调整正在运行的应用程序的配置。 我们将看看这些端点中的每一个如何深入了解正在运行的应用程序的配置，从 `/beans` 端点开始。

**获取 Bean Wiring报告**

探索 Spring 应用程序上下文最重要的端点是 `/beans` 端点。 此端点返回一个 JSON 文档，描述应用程序上下文中的每个 bean、它的 Java 类型以及它注入的任何其他 bean。

从 GET 请求到 `/beans` 的完整响应可以轻松地填满整个章节。 不是检查来自 `/beans` 的完整响应，让我们考虑以下代码片段，它专注于单个 bean 条目：

```text
{
	"contexts": {
		"application-1": {
			"beans": {
   ...
				"ingredientsController": {
					"aliases": [],
					"scope": "singleton",
					"type": "tacos.ingredients.IngredientsController",
					"resource": "file [/Users/habuma/Documents/Workspaces/
					TacoCloud/ingredient-service/target/classes/tacos/ingredients/
					IngredientsController.class]",
					"dependencies": [
						"ingredientRepository"
					]
				},
		...
			},
			"parentId": null
		}
	}
}
```

响应的根是 contexts 元素，它包括应用程序中每个 Spring 应用程序上下文的一个子元素。 在每个应用程序上下文中都有一个 beans 元素，其中包含应用程序上下文中所有 bean 的详细信息。

在前面的示例中，显示的 bean 是名称为成分控制器的 bean。 您可以看到它没有别名，范围为单例，并且类型为 `tacos.ingredients.IngredientsController`。 此外，资源属性给出了定义 bean 的类文件的路径。 并且 dependencies 属性列出了注入给定 bean 的所有其他 bean。 在这种情况下，成分控制器 bean 被注入了一个名称为成分库的 bean。

**解释自动配置**

如您所见，自动配置是 Spring Boot 提供的最强大的功能之一。 但是，有时您可能想知道为什么会自动配置某些内容。

或者您可能期望某些东西已经被自动配置，却想知道为什么它没有被自动配置。 在这种情况下，您可以向 `/conditions` 发出 GET 请求，以了解自动配置中发生的情况。

`/conditions` 返回的自动配置报告分为三部分：正匹配（条件配置通过）、负匹配（条件配置失败）和无条件类。 以下来自对 `/conditions` 请求的响应的片段显示了每个部分的示例：

```text
{
  "contexts": {
    "application-1": {
      "positiveMatches": {
      ...
        "MongoDataAutoConfiguration#mongoTemplate": [
          {
            "condition": "OnBeanCondition",
            "message": "@ConditionalOnMissingBean (types
            :org.springframework.data.mongodb.core.MongoTemplate;
            SearchStrategy: all) did not find any beans"
          }
        ],
      ...
    },
    "negativeMatches": {
      ...
      "DispatcherServletAutoConfiguration": {
        "notMatched": [
          {
            "condition": "OnClassCondition",
            "message": "@ConditionalOnClass did not find required
            class 'org.springframework.web.servlet.
            DispatcherServlet'"
          }
        ],
        "matched": []
      },
      ...
    },
    "unconditionalClasses": [
      ...
      "org.springframework.boot.autoconfigure.context.
      ConfigurationPropertiesAutoConfiguration",
      ...
    ]
  }
  }
}
```



